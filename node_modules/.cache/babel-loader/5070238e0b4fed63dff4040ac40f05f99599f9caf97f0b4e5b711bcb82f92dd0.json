{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getCookieConsentValue}from\"react-cookie-consent\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AlbumList(_ref){let{searchValue,filterActive}=_ref;const[token,setToken]=useState(\"\");const[albums,setAlbums]=useState([]);const[loading,setLoading]=useState(true);const limit=50;const consent=getCookieConsentValue(\"rbw-cookie-consent\");async function fetchToken(){try{const res=await fetch(\"http://localhost:3002/refresh_token\");const data=await res.json();return data.access_token;}catch(err){console.error(\"Token-Fehler:\",err);return null;}}async function fetchAlbums(accessToken){let x=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;let y=arguments.length>2&&arguments[2]!==undefined?arguments[2]:50;try{const artistID=\"3meJIgRw7YleJrmbpbJK6S\";const res=await fetch(\"https://api.spotify.com/v1/artists/\".concat(artistID,\"/albums?limit=\").concat(y,\"&offset=\").concat(x),{headers:{Authorization:\"Bearer \".concat(accessToken)}});const data=await res.json();return data.items||[];}catch(err){console.error(\"Album-Fehler:\",err);return[];}}useEffect(()=>{// Wenn kein Consent: gar nicht laden\nif(!consent){setLoading(false);setAlbums([]);return;}async function loadAll(){const accessToken=await fetchToken();if(!accessToken)return;setToken(accessToken);let allAlbums=[];let offset=0;let hasMore=true;while(hasMore){const items=await fetchAlbums(accessToken,offset,limit);allAlbums=[...allAlbums,...items];if(items.length<limit){hasMore=false;}else{offset+=limit;}}setAlbums(allAlbums);setLoading(false);}loadAll();},[consent]);if(!consent){return/*#__PURE__*/_jsxs(\"div\",{className:\"hinweis-consent alert alert-info mt-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Um die Spotify-Alben der Drei ??? anzuzeigen, ben\\xF6tige ich deine Einwilligung zur Nutzung von Spotify (Cookies und Daten\\xFCbertragung).\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Bitte triff unten im Cookie-Hinweis deine Auswahl.\"})]});}// Loading-State\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-light\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Lade Folgen...\"})})});}const filtered=albums.filter(album=>{var _album$name,_album$name2,_album$name3,_album$name4,_album$name5,_album$name6,_album$name7,_album$name8,_album$name9,_album$name0;const matchSearch=(_album$name=album.name)===null||_album$name===void 0?void 0:_album$name.toLowerCase().includes((searchValue===null||searchValue===void 0?void 0:searchValue.toLowerCase())||\"\");if(!filterActive)return matchSearch;const exclude=((_album$name2=album.name)===null||_album$name2===void 0?void 0:_album$name2.toLowerCase().includes(\"liest...\"))||((_album$name3=album.name)===null||_album$name3===void 0?void 0:_album$name3.toLowerCase().includes(\"adventskalender\"))||((_album$name4=album.name)===null||_album$name4===void 0?void 0:_album$name4.toLowerCase().includes(\"sommer-fälle\"))||((_album$name5=album.name)===null||_album$name5===void 0?void 0:_album$name5.toLowerCase().includes(\"outro\"))||((_album$name6=album.name)===null||_album$name6===void 0?void 0:_album$name6.toLowerCase().includes(\"auferstehung\"))||((_album$name7=album.name)===null||_album$name7===void 0?void 0:_album$name7.toLowerCase().includes(\"brainwash\"))||((_album$name8=album.name)===null||_album$name8===void 0?void 0:_album$name8.toLowerCase().includes(\"das verfluchte schloss\"))||((_album$name9=album.name)===null||_album$name9===void 0?void 0:_album$name9.toLowerCase().includes(\"das geheimnis der geisterinsel\"))||((_album$name0=album.name)===null||_album$name0===void 0?void 0:_album$name0.toLowerCase().includes(\"hörspiel\"));const tooManyTracks=album.total_tracks>50;return matchSearch&&!exclude&&!tooManyTracks;});return/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"episode-list row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 list-unstyled\",children:filtered.map(album=>{var _album$external_urls,_album$images,_album$images$;return/*#__PURE__*/_jsx(\"li\",{className:\"episode col mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",children:/*#__PURE__*/_jsxs(\"a\",{href:(_album$external_urls=album.external_urls)===null||_album$external_urls===void 0?void 0:_album$external_urls.spotify,target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-decoration-none\",children:[/*#__PURE__*/_jsx(\"img\",{src:(_album$images=album.images)===null||_album$images===void 0?void 0:(_album$images$=_album$images[0])===null||_album$images$===void 0?void 0:_album$images$.url,alt:album.name,className:\"card-img-top\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"episode-title card-title\",children:album.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text text-muted\",children:album.release_date})]})]})})},album.id);})})});}export default AlbumList;","map":{"version":3,"names":["React","useEffect","useState","getCookieConsentValue","jsx","_jsx","jsxs","_jsxs","AlbumList","_ref","searchValue","filterActive","token","setToken","albums","setAlbums","loading","setLoading","limit","consent","fetchToken","res","fetch","data","json","access_token","err","console","error","fetchAlbums","accessToken","x","arguments","length","undefined","y","artistID","concat","headers","Authorization","items","loadAll","allAlbums","offset","hasMore","className","children","role","filtered","filter","album","_album$name","_album$name2","_album$name3","_album$name4","_album$name5","_album$name6","_album$name7","_album$name8","_album$name9","_album$name0","matchSearch","name","toLowerCase","includes","exclude","tooManyTracks","total_tracks","map","_album$external_urls","_album$images","_album$images$","href","external_urls","spotify","target","rel","src","images","url","alt","release_date","id"],"sources":["C:/Users/pesch/Documents/DBE Academy/_Eigenes Projekt/live-projekt/github live/rocky-beach-welle-live/frontend/src/components/albums.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getCookieConsentValue } from \"react-cookie-consent\";\r\n\r\nfunction AlbumList({ searchValue, filterActive }) {\r\n  const [token, setToken] = useState(\"\");\r\n  const [albums, setAlbums] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const limit = 50;\r\n\r\n  const consent = getCookieConsentValue(\"rbw-cookie-consent\");\r\n\r\n  async function fetchToken() {\r\n    try {\r\n      const res = await fetch(\"http://localhost:3002/refresh_token\");\r\n      const data = await res.json();\r\n      return data.access_token;\r\n    } catch (err) {\r\n      console.error(\"Token-Fehler:\", err);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async function fetchAlbums(accessToken, x = 0, y = 50) {\r\n    try {\r\n      const artistID = \"3meJIgRw7YleJrmbpbJK6S\";\r\n\r\n      const res = await fetch(\r\n        `https://api.spotify.com/v1/artists/${artistID}/albums?limit=${y}&offset=${x}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${accessToken}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      const data = await res.json();\r\n      return data.items || [];\r\n    } catch (err) {\r\n      console.error(\"Album-Fehler:\", err);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Wenn kein Consent: gar nicht laden\r\n    if (!consent) {\r\n      setLoading(false);\r\n      setAlbums([]);\r\n      return;\r\n    }\r\n\r\n    async function loadAll() {\r\n      const accessToken = await fetchToken();\r\n      if (!accessToken) return;\r\n\r\n      setToken(accessToken);\r\n\r\n      let allAlbums = [];\r\n      let offset = 0;\r\n      let hasMore = true;\r\n\r\n      while (hasMore) {\r\n        const items = await fetchAlbums(accessToken, offset, limit);\r\n        allAlbums = [...allAlbums, ...items];\r\n        if (items.length < limit) {\r\n          hasMore = false;\r\n        } else {\r\n          offset += limit;\r\n        }\r\n      }\r\n      setAlbums(allAlbums);\r\n      setLoading(false);\r\n    }\r\n\r\n    loadAll();\r\n  }, [consent]); \r\n\r\n  if (!consent) {\r\n    return (\r\n      <div className=\"hinweis-consent alert alert-info mt-4\">\r\n        <p>Um die Spotify-Alben der Drei ??? anzuzeigen, benötige ich deine\r\n        Einwilligung zur Nutzung von Spotify (Cookies und Datenübertragung).</p>\r\n        <p>Bitte triff unten im Cookie-Hinweis deine Auswahl.</p>  \r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Loading-State\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center mb-5\">\r\n        <div className=\"spinner-border text-light\" role=\"status\">\r\n          <span className=\"visually-hidden\">Lade Folgen...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const filtered = albums.filter((album) => {\r\n    const matchSearch = album.name\r\n      ?.toLowerCase()\r\n      .includes(searchValue?.toLowerCase() || \"\");\r\n    if (!filterActive) return matchSearch;\r\n\r\n    const exclude =\r\n      album.name?.toLowerCase().includes(\"liest...\") ||\r\n      album.name?.toLowerCase().includes(\"adventskalender\") ||\r\n      album.name?.toLowerCase().includes(\"sommer-fälle\") ||\r\n      album.name?.toLowerCase().includes(\"outro\") ||\r\n      album.name?.toLowerCase().includes(\"auferstehung\") ||\r\n      album.name?.toLowerCase().includes(\"brainwash\") ||\r\n      album.name?.toLowerCase().includes(\"das verfluchte schloss\") ||\r\n      album.name?.toLowerCase().includes(\"das geheimnis der geisterinsel\") ||\r\n      album.name?.toLowerCase().includes(\"hörspiel\");\r\n    const tooManyTracks = album.total_tracks > 50;\r\n    return matchSearch && !exclude && !tooManyTracks;\r\n  });\r\n\r\n  return (\r\n    <div className=\"grid\">\r\n      <ul className=\"episode-list row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 list-unstyled\">\r\n        {filtered.map((album) => (\r\n          <li key={album.id} className=\"episode col mb-4\">\r\n            <div className=\"card h-100\">\r\n              <a\r\n                href={album.external_urls?.spotify}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"text-decoration-none\"\r\n              >\r\n                <img\r\n                  src={album.images?.[0]?.url}\r\n                  alt={album.name}\r\n                  className=\"card-img-top\"\r\n                />\r\n                <div className=\"card-body\">\r\n                  <p className=\"episode-title card-title\">{album.name}</p>\r\n                  <p className=\"card-text text-muted\">{album.release_date}</p>\r\n                </div>\r\n              </a>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AlbumList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}